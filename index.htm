<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<title>GEO state in python world</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=1274, user-scalable=no">
	<link rel="stylesheet" href="themes/ribbon/styles/style.css">
	<link rel="stylesheet" href="themes/ribbon/styles/print.css" media="print">
	<!--
		To apply styles to the certain slides
		use slide ID to get needed elements
		-->
	<style>
		#Cover h2 {
			color:#FFF;
			text-align:center;
			font-size:70px;
			}
		#FitToWidth h2,
		#FitToHeight h2 {
			color:#FFF;
			text-align:center;
			}
	</style>
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-35720720-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>
<body class="list">
	<header class="caption">
		<h1>GEO state in python world</h1>
		<p>Vasyl Dizhak, djangostars.com <a href="http://twitter.com/rootart">@rootart</a></p>
	</header>

	<div class="slide cover" id="Cover"><div>
		<section>
			<header>
				<h2>GEO state in python world</br>Vasyl Dizhak</br>@rootart</h2>

			</header>
			<img src="pictures/intro.jpg" alt="">
		</section>
	</div></div>


    <div id="PresentationLink" class="slide shout"><div>
        <section>
        <header><h2><a  style="font-size: 0.4em" href="http://rootart.github.com/uapycon/">http://rootart.github.com/uapycon/</a></h2></header>
        </section>
    </div></div>


    <div id="Contents" class="slide"><div>
        <section>
        <header>Contents</header>
        <ul>
            <li>Concepts</li>
            <li>Location, distance, units</li>
            <li>Projections, coordinate systems</li>
            <li>GIS data formats</li>
            <li>Storing and analysis</li>
            <li>Libraries and Applications</li>
            <li>Data sources</li>
        </ul>
        </section>
    </div></div>
        
	<div class="slide cover" id="Map"><div>
		<section>
			<img src="pictures/map.png" alt="">
		</section>
	</div></div>
    
	<div class="slide cover" id="Map-Cluster"><div>
		<section>
			<img src="pictures/map-cluster.png" alt="">
		</section>
	</div></div>

    <div id="Location" class="slide"><div>
        <section>
        <header>Location</header>
        Locations represent points on the surface of the Earth.
        The most common way of measuring is in using latitude and longitude.
        <mark>58.1093, 35.9849</mark>
        </section>
    </div></div>

    <div id="Distance" class="slide"><div>
        <section>
        <header>Distance</header>
        <p>Distance between two points can be represented in different ways</p>
        <ul>
            <li>Angular distance <mark> 15 degree</mark></li>
            <li>Linear distance <mark>5km</mark></li>
        </ul>
        <p>* Distance measuring became one of the key things in geo world</p>
        </section>
    </div></div>


    <div id="Units" class="slide"><div>
        <section>
        <header>Units</header>
        <ul>
            <li>Meters</li>
            <li>Inches</li>
            <li>Yards</li>
            <li>Kilometers</li>
            <li>International miles</li>
            <li>Rods</li>
            <li>...</li>
            
        </ul>
        </section>
    </div></div>


    <div id="Projections" class="slide"><div>
        <section>
        <header>Projections</header>
        <p>Converting 3d Earth to the flat map is known as projection. <br>
            There is no perfect projection as every projection distorts the Earth's surface is some way.
            There are three main groups of projections
        </p>
        <ul>
            <li>Cylindrical</li>
            <li>Conical</li>
            <li>Azimuthal</li>
            
        </ul>
        </section>
    </div></div>

    <div id="CoordinateSystems" class="slide"><div>
        <section>
        <header>Coordinate systems</header>
        <ul>
            <li><strong>Geodetic</strong> - coordinates are in angels latitude/longitude</li>
            <li><strong>Projected</strong> - represents world surface in a flat way, using linear unigs and play with various distortions</li>
            
        </ul>
        </section>
    </div></div>


    <div id="Standards" class="slide"><div>
        <section>
        <header>Standards</header>
        <ul>
            <li><code>OGC</code>: Open Geospatial Consortium. Inc.</li>
            <li><code>SFS</code>: Simple Feature Access for SQL which is a most popular OGC starndard for spatial databases</li>
            <li><code>WKT</code>: Well Known Text <code>POINT (30 10)</code></li>
            <li><code>WKB</code>: Binary representation of WKT</li>
            <li><code>EWKT, EWKB, HEXEWKB</code></li>
            <li><code>GML</code>: Geometry Markup Language (XML based)</li>
            <li><code>KML</code>: Keyhole Markup Language (Google Earth/Maps format)</li>
            
        </ul>
        </section>
    </div></div>
    
    
    <div id="Standards2" class="slide"><div>
        <section>
        <header>Standards</header>
        <ul>
            <li><code>WMS</code>: Web Mapping Service (serves up images)</li>
            <li><code>WFS</code>: Web Feature Service (serves up vector data)</li>
            <li><code>GeoJSON</code>: Geometry JSON</li>
            <li><code>GeoRSS</code></li>
            <li><code>SRS</code>: Spatial Reference System</li>
            <li><code>CRS, EPSG, SRID</code></li>
            <li>...</li>
            
        </ul>
        </section>
    </div></div>

    <div id="GeometryObjects" class="slide"><div>
        <section>
        <header>Geometry objects</header>
        <ul>
            <li>Point</li>
            <li>LineString</li>
            <li>LineRing</li>
            <li>Polygon</li>
            <li>Multi - {Point|Sting|Polygon}</li>
        </ul>
        <p>* In python could be represented as list, tuple, 2*n-tuple, dict, object</p>
        </section>
    </div></div>


    <div id="GisDataFormats" class="slide"><div>
        <section>
        <header>GIS data formats</header>
        <p>Why they are different? <p>
        <ul>
            <li>Descritbe geographical <strong>features</strong></li>
            <li>Additional <strong>metadata</strong> like coordinate system, units etc</li>
            <li>Information about geographical feature that are being described</li>
            <li>Display information</li>
        </ul>
        </section>
    </div></div>

    <div id="GisDataFormats2" class="slide"><div>
        <section>
        <ul>
            <li>Well-known Text (WKT)</li>
            <li>Well-known Binary (WKB)</li>
            <li>GeoJSON</li>
            <li>Shapefile</li>
            <li>Simple Features</li>
            <li>Coverage</li>
        </ul>
        </section>
    </div></div>
    
    <div id="GisDataFormatsGeneral" class="slide"><div>
        <section>
            <br>
            <p>In general all geo data formats can be devided into two main categories</p>
        <ul>
            <li><strong>Vector</strong>
                <ul>
                    <li>ESRI Shapefile</li>
                    <li>Well-known Binary (WKB)</li>
                    <li>GeoJSON</li>
                    <li>KML</li>
                </ul>
            </li>

            <li><strong>Raster</strong>
                <ul>
                    <li>GeoTiFF</li>
                    <li>GeoPDF</li>
                </ul>
            </li>
        </ul>
        </section>
    </div></div>


    <div id="Operations" class="slide"><div>
        <section>
        <header>Operations</header>
        <ul>
            <li>Intersection</li>
            <li>Difference</li>
            <li>Union</li>
            <li>Centroid</li>
            <li>Buffer</li>
            <li>...</li>
        </ul>
        </section>
    </div></div>


    <div id="Operations2" class="slide"><div>
        <section>
        <header></header>
        <ul>
            <li>Contains</li>
            <li>Within</li>
            <li>Intersects</li>
            <li>Disjoint</li>
            <li>...</li>
        </ul>
        </section>
    </div></div>
    
    
    <div id="OperationsDevelopment" class="slide"><div>
        <section>
        <header>What is common for developers and real life apps</header>
        <ul>
            <li><strong>Nearest neigbor</strong> - we should get features that are closest to some point</li>
            <li><strong>Bounding box</strong> - return all features that are in a given bounds</li>
            <li><strong>Point query</strong> return all features that intersects with point</li>
        </ul>
        </section>
    </div></div>



    <div id="StorageAndAnalysis" class="slide"><div>
        <section>
        <header>Storage and analysis</header>
        <ul>
            <li>Spatial indexes</li>
            <li>GEO files as a storage</li>
            <li>Spatial databases</li>
            <li>Search engines for storing and analyzing geo data</li>
</li>
        </ul>
        </section>
    </div></div>


    <div id="SpatialIndexes" class="slide"><div>
        <section>
        <header>Indexes</header>
        <p>For speeding geo operations under the collections of geometries in different storages we can and should use custom indexes and there is two main of them that performs well for spatial data</p>
        <ul>
            <li><code>R-tree</code> which is good for all types geometries</li>
            <li><code>Quad-tree</code> performs best with point data</li>
            
        </ul>
        </section>
    </div></div>


    <div id="Dependencies" class="slide"><div>
        <section>
        <header>Common Dependencies</header>
        <ul>
            <li>GDAL/ORG</li>
            <li>GEOS</li>
            <li>PROJ.4</li>
            <li>...</li>
        </ul>
        </section>
    </div></div>

    <div id="Databases" class="slide shout"><div>
        <section>
        <header><h2>Databases</h2></header>
        </section>
    </div></div>



    <div id="DatabasesList" class="slide"><div>
        <section>
        <header>Spatial databases</header>
        <ul>
            <li><code>PostGIS</code></li>
            <li>Spatial Sqlite</li>
            <li>MySQL</li>
            <li>Oracle</li>
            <li>MSSQL</li>
            <li>*MongoDB</li>
        </ul>
        </section>
    </div></div>


	<div class="slide cover" id="Postgis"><div>
		<section>
			<img src="pictures/postgres.png" alt="">
		</section>
	</div></div>

	<div class="slide cover" id="Postgresql"><div>
		<section>
			<img src="pictures/postgis.png" alt="">
		</section>
	</div></div>


    <div class="slide cover" id="CartoDB"><div>
        <section>
            <img src="pictures/cartodb.png" alt="">
        </section>
    </div></div>

    <div id="PostgisPythonExample" class="slide"><div>
        <section>
        <pre>
            <code>
import <mark>psycopg2</mark>
connection = psycopg2.connect("dbname=... user=...")
cursor = connection.cursor()
cursor.execute("SELECT * FROM people 
    WHERE <mark>ST_DWithin</mark>(geom, 'POINT(46 32)', 10);")
                </code>
            </section>
        </pre>
    </div></div>



    <div id="ORM" class="slide shout"><div>
        <section>
        <header><h2 style="font-size: 3em;">Database + ORM = <b style="color:red;">♥</b></h2></header>
        </section>
    </div></div>

    <div id="DjangoORMModel" class="slide"><div>
        <section>
        <pre>
<code>from <mark>django.contrib.gis.db</mark> import models
class Person(models.Model):
    name = models.CharField(max_length=255)
    nickname = models.CharField(max_length=100)
    location = models.CharField(max_length=255)
    iso2 = models.CharField(max_length=2)
    avatar = models.CharField(max_length=255)
    geom = models.<mark>PointField()</mark>
    objects = models.<mark>GeoManager()</mark>
            </code>
        </pre>
        </section>
    </div></div>



    <div id="DjangoORM" class="slide"><div>
        <section>
        <header>Django ORM</header>
        <pre>
            <code>

People.objects.<mark>filter</mark>(<mark>geom__dwithin=(point, D(km=10))</mark>)
            </code>
        </pre>
        </section>
    </div></div>

    <div id="Geoalchemy" class="slide"><div>
        <section>
        <header>Geoalchemy</header>
        <p>And for sqlalchemy funs there is <a href="http://geoalchemy.org">geoalchemy</a></p>
        which requires sqlachemy but is as easy as pie :) 
        <pre>
            <code>pip install <mark>geoalchemy</mark></code>
        </pre>
        </section>
    </div></div>



    <div id="Python" class="slide shout"><div>
        <section>
        <header><h2>Python</h2></header>
        </section>
    </div></div>
    

    <div id="PythonModules" class="slide"><div>
        <section>
        <header>Modules</header>
        <ul>
            <li>OSGEO/GDAL <a href="http://gdal.org/python/">http://gdal.org/python/</a></li>
            <li>Shapely <a href="http://pypi.python.org/pypi/Shapely">http://pypi.python.org/pypi/Shapely</a></li>
            <li>GeoDjango <a href="http://geodjango.org/">http://geodjango.org/</a></li>
            <li>Rtree <a href="http://pypi.python.org/pypi/Rtree/">http://pypi.python.org/pypi/Rtree/</a></li>
            <li>pyproj <a href="http://code.google.com/p/pyproj/">http://code.google.com/p/pyproj/</a></li>
            <li>Mapnik <a href="http://mapnik.org">http://mapnik.org</a></li>
            <li>MapFish <a href="http://mapfish.org/">http://mapfish.org/</a></li>
            <li>GeoAlchemy <a href="http://geoalchemy.org">http://geoalchemy.org</a></li>
            <li>...</li>
        </ul>
        </section>
    </div></div>


    <div id="Pypi" class="slide"><div>
        <section>
        <header>Even more python gis packages at PYPI by classifier</header>
<pre><code>

    Topic :: Scientific/Engineering :: <mark>GIS</mark>  

</code></pre>
        </section>
    </div></div>



    <div id="GdalExample" class="slide"><div>
        <section>
        <header>GDAL</header>
<pre><code>
from <mark>osgeo</mark> import <mark>ogr</mark>
shapefile = <mark>ogr.Open("roads.shp")</mark>
layer = shapefile.<mark>GetLayer(0)</mark>
count = layer.<mark>GetFeatureCount()</mark>
feature = layer[0]
print count, <mark>feature.keys()</mark>, <mark>feature.ExportToJson()</mark>

</code></pre>
        </section>
    </div></div>



    <div id="GDALOutput" class="slide"><div>
        <section>
<pre><code>
<mark>22724</mark>
['<mark>osm_id</mark>', '<mark>name</mark>',
'<mark>ref</mark>', '<mark>type</mark>', '<mark>oneway</mark>', '<mark>maxspeed</mark>']
{"geometry": {"type": "<mark>LineString</mark>", "coordinates":
 [[30.527518600000001, 50.440472700000001], 
 [30.527638799999998, 50.440396100000001], ...},
"type": "Feature",
"<mark>properties</mark>": {"maxspeed": 0, "name": null,
"ref": null, "osm_id": 4306104.0, "oneway": 0,
"type": "footway"}}
</code></pre>
        </section>
    </div></div>


    <div id="Shapely" class="slide"><div>
        <section>
        <header>Shapely</header>
<pre><code>
from <mark>shapely.geometry</mark> import <mark>Point</mark>
from <mark>shapely.ops</mark> import <mark>cascaded_union</mark>

polygons = [Point(i, 0).<mark>buffer(0.7)</mark> for i in range(5)]
geom = <mark>cascaded_union</mark>(polygons)

geom.<mark>to_wkt()</mark>
</code></pre>
        </section>
    </div></div>


    <div id="ShapelyOuput" class="slide"><div>
        <section>
<pre><code>
'<mark>POLYGON</mark> ((0.5000000000000001 -0.4894302343731161,
0.4949747468305837 -0.4949747468305829,
0.4440752989145523 -0.5411073173539154,
0.3888991631137222 -0.5820287286117812,
0.3299777157781990 -0.6173448850438481,
0.2678784026555636 -0.6467156727579003, ...
</code></pre>
        </section>
    </div></div>

    <div class="slide cover" id="ShapelyImage"><div>
        <section>
            <img src="pictures/cunion.png" alt="">
        </section>
    </div></div>


    <div id="ShapelyArea" class="slide"><div>
        <section>
        <header>Geometry properties</header>
<pre><code>
>>> print geom.<mark>area</mark>
>>> 6.6103013551167971

>>> geom.<mark>envelope</mark>.to_wkt()
>>> 'POLYGON ((-0.7000000000000000 -0.7000000000000000,
4.7000000000000002 -0.7000000000000000,
...'
</code></pre>
        </section>
    </div></div>

    <div id="Mapnik" class="slide"><div>
        <section>
<pre><code>
import <mark>mapnik</mark>
m = mapnik <mark>Map(1200, 800)</mark>
m.background = mapnik.Color('#fff')
s = <mark>mapnik.Style()</mark>
r = <mark>mapnik.Rule()</mark>
line_symbolizer = mapnik.<mark>LineSymbolizer(mapnik.Color('#000'),2)</mark>
r.symbols.append(line_symbolizer)
s.rules.append(r)
m.append_style('style',s)
</code></pre>
        </section>
    </div></div>


    <div id="Mapnik2" class="slide"><div>
        <section>
 <pre><code>
...
ds = <mark>mapnik.Shapefile(file='roads.shp')</mark>
layer = mapnik.Layer('ukraine_roads')
layer.<mark>datasource</mark> = ds
layer.<mark>styles.append('style')</mark>
m.layers.<mark>append(layer)</mark>
m.zoom_all()
mapnik.<mark>render_to_file(m,'ukraine-roads.png', 'png')</mark>
 </code></pre>
        </section>
    </div></div>

    <div class="slide cover" id="MapnikImage"><div>
        <section>
            <img src="pictures/ukraine-roads.png" alt="">
        </section>
    </div></div>


    <div id="WorthToBeMentioned" class="slide"><div>
        <section>
        <header>Worth to be mentioned</header>
        <ul>
            <li><a href="http://tilestache.org/">TileStache</a> - Python-based server application that can serve up map tiles based on rendered geographic data</li>
            <li><a href="https://bitbucket.org/springmeyer/tilelite/wiki/Home">Tilelite</a> - A lightweight Mapnik tile-server written as a WSGI application.</li>
            <li><a href="http://mapproxy.org/">Maproxy</a> - an open source proxy for geospatial data</li>
            <li><a href="http://www.qgis.org/">QGIS</a> - desktop application for working with spatial data</li>           
        </ul>
        </section>
    </div></div>


    <div id="List" class="slide"><div>
        <section>
        <header>Data sources</header>
        <ul>
            <li><a href="http://openstreetmap.org">OSM</a></li>
            <li><a href="http://www.geofabrik.de/data/download.html">geofabrik.de</a></li>
            <li><a href="http://data.gov">data.gov</a></li>
            <li><a href="http://cloudmade.com">cloudmade.com</a></li>
            <li><a href="http://gis-lab.info/projects/osm-export.html">gis-lab.info</a></li>
            <li><a href="http://www.factual.com/">factual.com</a></li>
            <li>...</li>
            
        </ul>
        </section>
    </div></div>

    <div id="acknowledgments" class="slide"><div>
        <section>
        <header>Acknowledgments</header>
        <ul>
            <li>Pictures
<ul>
    <li><a href="http://500px.com/search?utf8=%E2%9C%93&q=geography">http://500px.com</a>, <a href="http://toblerity.github.com/shapely/manual.html">Shapely manual</a></li>
</ul>
            </li>
            <li>
                Concepts and ideas
                <ul>
                    <li><a href="https://speakerdeck.com/u/paulsmith/p/spatial-data-and-web-mapping-with-python">Paul Smith</a>,  <a href="https://speakerdeck.com/u/sd/p/the-streeteasy-geo-stack">Sebastian Delmont</a></li>
                </ul>
            </li>
            <li>Presentation engine
                <ul>
                    <li><a href="https://github.com/pepelsbey/shower">shower</a> by Vadim Makeev</li>
                </ul>
            </li>
            
        </ul>
        </section>
    </div></div>

    <div id="List" class="slide shout"><div>
        <section>
<header>        <h2>Thank you!</br>
            Questions</h2></header>
        </section>
    </div></div>

<!--     <div id="List" class="slide"><div>
        <section>
        <header>Contents</header>
        <ul>
            <li>Location</li>
            
        </ul>
        </section>
    </div></div> -->
	<div class="progress"><div></div></div>
	<script src="scripts/script.js"></script>
	<!-- Copyright © 2010–2012 Vadim Makeev — pepelsbey.net -->
	<!-- Photos by John Carey — fiftyfootshadows.net -->
</body>
</html>